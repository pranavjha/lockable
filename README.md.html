<!DOCTYPE html>
<html>
<head>
    <title>lockable</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport"
        content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    
    <link rel="stylesheet"
        media="all"
        href="assets/file_1.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/file_5.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/32px.png"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/40px.png"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/throbber.gif"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/file_7.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="assets/file_8.css"/>
    

    
    <script src="assets/file_2.js"
        type="text/javascript"></script>
    
    <script src="assets/file_3.js"
        type="text/javascript"></script>
    
    <script src="assets/file_4.js"
        type="text/javascript"></script>
    
    <script src="assets/file_6.js"
        type="text/javascript"></script>
    

    <script type="application/json" id="jsTreeJSON">
        [{"id":"lib","text":"lib","icon":"jstree-folder","parent":"#","a_attr":{"href":"lib"},"state":{"opened":false}},{"id":"lib/lockable.js","text":"lockable.js","icon":"jstree-file","parent":"lib","a_attr":{"href":"lib/lockable.js.html"},"state":{"selected":false}},{"id":"test","text":"test","icon":"jstree-folder","parent":"#","a_attr":{"href":"test"},"state":{"opened":false}},{"id":"test/acquire.js","text":"acquire.js","icon":"jstree-file","parent":"test","a_attr":{"href":"test/acquire.js.html"},"state":{"selected":false}},{"id":"test/queue.js","text":"queue.js","icon":"jstree-file","parent":"test","a_attr":{"href":"test/queue.js.html"},"state":{"selected":false}},{"id":"test/sequence.js","text":"sequence.js","icon":"jstree-file","parent":"test","a_attr":{"href":"test/sequence.js.html"},"state":{"selected":false}},{"id":"Gruntfile.js","text":"Gruntfile.js","icon":"jstree-file","parent":"#","a_attr":{"href":"Gruntfile.js.html"},"state":{"selected":false}},{"id":"README.md","text":"README.md","icon":"jstree-file","parent":"#","a_attr":{"href":"README.md.html"},"state":{"selected":true}}]
    </script>
</head>
<body class="markdown-body">
<h1>
    lockable
</h1>
<div class="subHeading">
    README.md
</div>
<button type="button" class="navigatorToggle">&#9776; files...</button>
<nav class="navigationTree minimized">
    <input type="text" id="jsTreeSearch" placeholder="search..."/>
    <div></div>
</nav>
<section>
    <ul class="sectionDetails docsOnly">
        
        
        <li id="section-1">
            <div class="annotation">
                <p><a href="https://travis-ci.org/pranavjha/lockable"><img src="https://img.shields.io/travis/pranavjha/lockable.svg?style=flat-square" alt="Build Status"></a>
<a href="https://codeclimate.com/github/pranavjha/lockable"><img src="https://img.shields.io/codeclimate/github/pranavjha/lockable.svg?style=flat-square" alt="Code Climate"></a>
<a href="https://coveralls.io/r/pranavjha/lockable"><img src="http://img.shields.io/coveralls/pranavjha/lockable.svg?style=flat-square" alt="Coverage Status"></a>
<a href="http://pranavjha.github.io/lockable/"><img src="https://img.shields.io/badge/documentation-plus-green.svg?style=flat-square" alt="Documentation"></a></p>
<p><a href="https://david-dm.org/pranavjha/lockable"><img src="https://img.shields.io/david/pranavjha/lockable.svg?style=flat-square" alt="Dependency Status"></a>
<a href="https://david-dm.org/pranavjha/lockable#info=devDependencies"><img src="https://img.shields.io/david/dev/pranavjha/lockable.svg?style=flat-square" alt="devDependency Status"></a>
<a href="https://david-dm.org/pranavjha/lockable#info=peerDependencies"><img src="https://img.shields.io/david/peer/pranavjha/lockable.svg?style=flat-square" alt="peerDependency Status"></a></p>

<blockquote>
<p>Lockable is a utility module for promises to control their execution and their resolution sequence. It exposes methods
 that can be used to control the execution order of promises</p>
</blockquote>
<h2 id="usage">Usage</h2>
<pre><code class="lang-javascript"><span class="hljs-comment">// load the lockable library</span>

<span class="hljs-keyword">var</span> lockable = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lockable'</span>);

<span class="hljs-keyword">var</span> keyChain = lockable.acquire(<span class="hljs-string">'key1.key2'</span>);
</code></pre>
<h2 id="public-functions">Public functions</h2>
<p>Lockable exposes the below methods that can be used on promises.</p>
<h2 id="-acquire-keychain-"><code>acquire(keyChain)</code></h2>
<p>Acquire function is used to acquire a lock on a keychain</p>
<p>A keychain is represents a lock and is a <code>.</code> separated string. A keychain string <code>&#39;A.B.C&#39;</code> will represent a hierarchy
with parents <code>&#39;A&#39;</code> and <code>&#39;A.B&#39;&#39;</code>.</p>
<p>Acquiring a lock on any parent keychain will invalidate all the child keychain locks. This is detailed in the below
examples:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> lockable = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lockable'</span>);

<span class="hljs-keyword">var</span> key1 = lockable.acquire(<span class="hljs-string">'A.B'</span>);

key1() <span class="hljs-comment">// returns true here</span>

<span class="hljs-keyword">var</span> key2 = lockable.acquire(<span class="hljs-string">'A.B'</span>);

key1() <span class="hljs-comment">// returns false</span>
key2() <span class="hljs-comment">// returns true</span>


<span class="hljs-keyword">var</span> key3 = lockable.acquire(<span class="hljs-string">'A'</span>);

key1() <span class="hljs-comment">// returns false</span>
key2() <span class="hljs-comment">// returns false</span>
key3() <span class="hljs-comment">// returns true</span>


<span class="hljs-keyword">var</span> key4 = lockable.acquire(<span class="hljs-string">'A.B'</span>);

key1() <span class="hljs-comment">// returns false</span>
key2() <span class="hljs-comment">// returns false</span>
key3() <span class="hljs-comment">// returns true</span>
key4() <span class="hljs-comment">// returns true</span>
</code></pre>
<p>For more examples on <code>acquire</code> refer the <a href="./test/acquire.js.html">test cases</a></p>
<h2 id="-sequence-keychain-startcb-endcb-"><code>sequence(keyChain, startCb, endCb)</code></h2>
<p>Sequence is used to <em>sequencify</em> the resolution of promises. Promises added in a sequence will be resolved in the same
sequence in which they are added, irrespective of the execution time. Even though the actual promise will be executed
instantaneously, the callback will wait for the previous promises to resolve. This is illustrated in the below examples</p>
<p>A sequence can be used if multiple calls update the same object/DOM and only the latest update is relevant.</p>
<p>This is detailed in the below examples:</p>
<pre><code class="lang-javascript">
<span class="hljs-keyword">var</span> sequence = lockable.sequence();
<span class="hljs-keyword">var</span> promise1 = <span class="hljs-built_in">Promise</span>.delay(<span class="hljs-number">50</span>);
<span class="hljs-keyword">var</span> promise2 = <span class="hljs-built_in">Promise</span>.delay(<span class="hljs-number">60</span>);
<span class="hljs-keyword">var</span> promise3 = <span class="hljs-built_in">Promise</span>.delay(<span class="hljs-number">30</span>);

sequence(promise1).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);
});

sequence(promise2).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>);
});

sequence(promise3).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>);
});

<span class="hljs-comment">// Output:</span>
<span class="hljs-comment">// 1 (after 50 ms from start)</span>
<span class="hljs-comment">// 2 (after 60 ms form start)</span>
<span class="hljs-comment">// 3 (after 60 ms form start)</span>
</code></pre>
<p>For more examples on <code>sequence</code> refer the <a href="./test/sequence.js.html">test cases</a></p>
<h2 id="-queue-keychain-startcb-endcb-"><code>queue(keyChain, startCb, endCb)</code></h2>
<p>A queue delays the execution of functions till the return value of previous execution is resolved. This is different
from a sequence where, the actual promises are invoked immediately and only the resolution is delayed.</p>
<p>A queue can be used when multiple executions have to happen only one after the other (eg, updating the same records or
autosave in a UI form)</p>
<p>This is detailed in the below examples:</p>
<pre><code class="lang-javascript">
<span class="hljs-keyword">var</span> queue = lockable.queue();
queue(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.delay(<span class="hljs-number">50</span>);
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);
});
queue(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.delay(<span class="hljs-number">20</span>);
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);
});
queue(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.delay(<span class="hljs-number">30</span>);
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);
});

<span class="hljs-comment">// Output:</span>
<span class="hljs-comment">// 1 (after 50 ms from start)</span>
<span class="hljs-comment">// 2 (after 70 ms form start)</span>
<span class="hljs-comment">// 3 (after 100 ms form start)</span>
</code></pre>
<p>For more examples on <code>queue</code> refer the <a href="./test/queue.js.html">test cases</a></p>

            </div><div class="content">
                
            </div>
        </li>
        
    </ul>
</section>
</body>
</html>
